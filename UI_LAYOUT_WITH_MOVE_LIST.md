# UI 佈局說明 - 棋譜面板

## 整體佈局

```
┌─────────────────────────────────────────────────────────────────────────┐
│  國際象棋 - 雙人對弈                                        [_][□][X]  │
├─────────────────────────────────────────────────────────────────────────┤
│  遊戲  設定                                                              │
├────────┬──────────────────────────────────────────────┬─────────────────┤
│        │                                              │                 │
│ 棋譜   │                                              │  白方時間限制   │
│────────│              ┌──────┐                        │  ╔═══════════╗  │
│        │              │ 黑方 │                        │  ║ 5 分鐘    ║  │
│ 1. e4  │              │ 時間 │    ┌──┬──┬──┬──┐      │  ╚═══════════╝  │
│    e5  │              └──────┘    │♜│♞│♝│♛│      │                 │
│        │                          └──┴──┴──┴──┘      │  黑方時間限制   │
│ 2. Nf3 │         8    ♜  ♞  ♝  ♛  ♚  ♝  ♞  ♜         │  ╔═══════════╗  │
│    Nc6 │         7    ♟  ♟  ♟  ♟  ♟  ♟  ♟  ♟         │  ║ 5 分鐘    ║  │
│        │         6    ·  ·  ·  ·  ·  ·  ·  ·         │  ╚═══════════╝  │
│ 3. Bb5 │         5    ·  ·  ·  ·  ·  ·  ·  ·         │                 │
│    a6  │         4    ·  ·  ·  ·  ♙  ·  ·  ·         │  增量（秒）     │
│        │         3    ·  ·  ·  ·  ·  ♘  ·  ·         │  ╔═══════════╗  │
│ 4. Ba4 │         2    ♙  ♙  ♙  ♙  ·  ♙  ♙  ♙         │  ║ 0         ║  │
│    Nf6 │         1    ♖  ♘  ♗  ♕  ♔  ♗  ·  ♖         │  ╚═══════════╝  │
│        │              a  b  c  d  e  f  g  h         │                 │
│        │                          ┌──┬──┬──┬──┐      │                 │
│        │                          │♖│♘│♗│♕│      │  ┌───────────┐   │
│        │              ┌──────┐    └──┴──┴──┴──┘      │  │   開始    │   │
│        │              │ 白方 │                        │  └───────────┘   │
│        │              │ 時間 │                        │                 │
│        │              └──────┘                        │                 │
│        │                                              │                 │
└────────┴──────────────────────────────────────────────┴─────────────────┘
```

## 遊戲結束後的佈局

```
┌─────────────────────────────────────────────────────────────────────────┐
│  國際象棋 - 雙人對弈                                        [_][□][X]  │
├─────────────────────────────────────────────────────────────────────────┤
│  遊戲  設定                                                              │
├────────┬──────────────────────────────────────────────┬─────────────────┤
│        │                                              │                 │
│ 棋譜   │                                              │  白方時間限制   │
│────────│                                              │  ╔═══════════╗  │
│        │         8    ♜  ·  ♝  ♛  ·  ♝  ·  ♜         │  ║ 5 分鐘    ║  │
│ 1. e4  │         7    ♟  ♟  ♟  ·  ♟  ♟  ♟  ♟         │  ╚═══════════╝  │
│    e5  │         6    ·  ·  ·  ♟  ·  ·  ·  ·         │                 │
│        │         5    ·  ·  ·  ·  ·  ·  ·  ♕         │  黑方時間限制   │
│ 2. Nf3 │         4    ·  ·  ·  ·  ♙  ·  ·  ·         │  ╔═══════════╗  │
│    Nc6 │         3    ·  ·  ·  ·  ·  ♘  ·  ·         │  ║ 5 分鐘    ║  │
│        │         2    ♙  ♙  ♙  ♙  ·  ♙  ♙  ♙         │  ╚═══════════╝  │
│ 3. Bb5 │         1    ♖  ♘  ♗  ·  ♔  ♗  ·  ♖         │                 │
│    a6  │              a  b  c  d  e  f  g  h         │  增量（秒）     │
│        │                                              │  ╔═══════════╗  │
│ 4. Ba4 │                                              │  ║ 0         ║  │
│    Nf6 │         【遊戲結束：白方獲勝！】              │  ╚═══════════╝  │
│ ...    │                                              │                 │
│        │                                              │  ┌───────────┐   │
│20. Qh5#│                                              │  │   開始    │   │
│        │                                              │  └───────────┘   │
│┌──────┐│                                              │                 │
││匯出PGN││                                              │                 │
│└──────┘│                                              │                 │
└────────┴──────────────────────────────────────────────┴─────────────────┘
```

## 佈局特點

### 左側面板 - 棋譜列表
- **寬度**：彈性伸展，隨視窗大小比例縮放
- **標題**："棋譜"（粗體，居中）
- **內容**：
  - 使用 QListWidget 顯示
  - 每行格式：`回合數. 白方移動 黑方移動`
  - 例如：`1. e4 e5`
  - 交替行顏色以提高可讀性
  - 自動捲動到最新移動
- **匯出按鈕**：
  - 遊戲結束時顯示
  - 位於棋譜列表下方
  - 文字："匯出 PGN"

### 中央區域 - 棋盤
- 標準 8x8 棋盤
- 顯示棋子和當前遊戲狀態
- 時間標籤在棋盤兩側（如果啟用計時）
- 保持原有的所有功能

### 右側面板 - 時間控制
- 白方/黑方時間限制滑桿
- 增量設定
- 開始/暫停按鈕
- 保持原有功能

## 代數記法示例

在棋譜面板中顯示的移動：

```
1. e4 e5
2. Nf3 Nc6
3. Bb5 a6
4. Ba4 Nf6
5. O-O Be7
6. Re1 b5
7. Bb3 d6
8. c3 O-O
9. h3 Na5
10. Bc2 c5
11. d4 Qc7
12. Nbd2 cxd4
13. cxd4 Nc6
14. Nb3 a5
15. Be3 a4
16. Nbd2 Bd7
17. Rc1 Qb8
18. dxe5 dxe5
19. Nh4 g6
20. Qh5 Qxh5#
```

## 匯出 PGN 範例

點擊「匯出 PGN」按鈕後生成的檔案內容：

```
[Event "雙人對弈"]
[Site "Qt_Chess"]
[Date "2025.11.23"]
[Round "-"]
[White "白方"]
[Black "黑方"]
[Result "0-1"]

1. e4 e5 2. Nf3 Nc6 3. Bb5 a6 4. Ba4 Nf6 5. O-O Be7
6. Re1 b5 7. Bb3 d6 8. c3 O-O 9. h3 Na5 10. Bc2 c5
11. d4 Qc7 12. Nbd2 cxd4 13. cxd4 Nc6 14. Nb3 a5 15. Be3 a4
16. Nbd2 Bd7 17. Rc1 Qb8 18. dxe5 dxe5 19. Nh4 g6 20. Qh5 Qxh5#
0-1
```

## 響應式設計

- 視窗最小寬度：824px
- 視窗最小高度：420px
- 左側面板：彈性伸展（伸展因子 1），隨視窗大小比例縮放
- 中央棋盤：固定大小（伸展因子 0），由兩側伸展空間居中
- 右側面板：彈性伸展（伸展因子 1），隨視窗大小比例縮放
- 所有元素在調整視窗大小時自動適應

## 互動流程

### 開始新遊戲
1. 點擊「遊戲」→「新遊戲」
2. 棋譜列表清空
3. 「匯出 PGN」按鈕隱藏
4. 棋盤重置

### 遊玩對局
1. 進行移動
2. 棋譜列表即時更新
3. 顯示標準代數記法
4. 可隨時查看歷史移動

### 遊戲結束
1. 達成將死/逼和/子力不足
2. 顯示遊戲結束訊息
3. 「匯出 PGN」按鈕出現
4. 可匯出完整對局記錄
