# Qt_Chess

基於 Qt5 開發的功能完整的雙人對弈國際象棋遊戲。

## 功能特點

- **完整的國際象棋實現**：包含所有棋子（王、后、車、象、馬、兵）及其正確的移動規則
- **特殊走法**：
  - **王車易位**：在適當條件下，王可以與車進行易位（王翼或后翼）
  - **兵升變**：兵到達棋盤對面底線時必須升變，可通過對話框選擇升變為后、車、象或馬
  - **吃過路兵**：當對手的兵從初始位置走兩格時，可在下一回合進行特殊的吃過路兵捕獲
- **回合制遊戲**：白方和黑方交替行棋
- **走法驗證**：只允許合法的走法
- **將軍檢測**：遊戲會自動檢測王是否被將軍
- **將死與逼和檢測**：遊戲自動檢測終局條件
- **視覺高亮**：選中的棋子和有效走法會被高亮顯示
- **簡潔界面**：經典棋盤配合 Unicode 象棋符號
- **新遊戲**：隨時重置棋盤開始新對局

## 編譯

### 需求
- Qt5 (qt5-qtbase-devel 或 qtbase5-dev)
- 支援 C++17 的編譯器
- qmake

### 編譯指令
```bash
qmake Qt_Chess.pro
make
```

### 執行
```bash
./Qt_Chess
```

## 如何遊玩

1. **選擇棋子**：點擊您的一個棋子（白方先行）
2. **拖放操作**：點擊並拖動棋子將其移動到有效位置
3. **取消移動**：拖動過程中隨時右鍵點擊可取消並將棋子歸位
4. **有效走法**：有效的目標格會以橙色高亮顯示
5. **移動棋子**：點擊高亮的格子移動棋子，或使用拖放
6. **取消選擇**：再次點擊選中的棋子或右鍵點擊可取消選擇
7. **回合指示**：當前玩家的回合顯示在頂部
8. **對局狀態**：將軍、將死和逼和會被自動檢測並顯示
9. **新遊戲**：點擊「新遊戲」按鈕重置棋盤

## 遊戲規則

- 白方始終先行
- 雙方輪流行棋
- 每個棋子按照標準國際象棋規則移動：
  - **兵**：向前走一格（首次移動可走兩格），斜向捕獲
  - **車**：橫向或縱向移動任意格數
  - **馬**：走 "L" 字形（一個方向走兩格，垂直方向走一格）
  - **象**：斜向移動任意格數
  - **后**：橫向、縱向或斜向移動任意格數
  - **王**：任意方向移動一格
- **特殊走法**：
  - **王車易位**：如果王和車都未移動過，它們之間沒有棋子，王未被將軍，且王不會經過或移入被將軍的位置，則可以進行易位
  - **兵升變**：當兵到達棋盤對面底線（白兵到達第 0 行，黑兵到達第 7 行）時，必須升變為后、車、象或馬
  - **吃過路兵**：如果對手的兵從起始位置一次走兩格並停在您的兵旁邊，您可以在下一回合「吃過路」捕獲它
- 不能將自己的王置於被將軍的狀態
- 當出現將死或逼和時對局結束

## 專案結構

- `main.cpp` - 應用程式入口點
- `qt_chess.h/cpp` - 主視窗和 UI 邏輯
- `chessboard.h/cpp` - 棋盤邏輯和規則
- `chesspiece.h/cpp` - 棋子定義和走法驗證
- `qt_chess.ui` - Qt UI 設計器文件

## 授權

這是一個用於學習 Qt 和遊戲開發的教育專案。