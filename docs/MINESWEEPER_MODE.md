# 地雷模式 (Minesweeper Mode)

## 功能概述

地雷模式是一個創新的西洋棋遊戲變體，結合了傳統西洋棋規則和地雷遊戲元素，為遊戲增添了額外的策略深度和挑戰性。

## 功能特點

### 地雷區域
- **範圍**：棋盤的第 3-6 行（索引 3-6），列 a-h（索引 0-7）
- **大小**：4×8 = 32 個格子
- **視覺標示**：地雷區域使用橙紅色邊框標示，讓玩家清楚識別危險區域

### 地雷放置
- **數量**：每局遊戲隨機放置 4-5 個地雷
- **分佈**：地雷在地雷區域內隨機分佈，不會重複放置
- **隱藏**：遊戲開始時，地雷位置對玩家隱藏

### 地雷數量提示
- **九宮格算法**：每個格子顯示周圍 8 個相鄰格子的地雷總數
- **顏色編碼**：
  - 1 個地雷：藍色
  - 2 個地雷：綠色
  - 3 個地雷：紅色
  - 4 個地雷以上：紫色
- **顯示規則**：只有當棋子移動到該格子後，該格子的地雷數量才會顯示

### 地雷觸發
- **觸發條件**：當棋子移動到有地雷的格子時
- **效果**：
  - 棋子立即被移除
  - 顯示地雷爆炸警告訊息
  - 該格子的地雷數量顯示為 0（因為該位置本身是地雷）

## 遊戲規則

### 基本規則
1. 遊戲遵循標準西洋棋規則
2. 所有棋子的移動方式保持不變
3. 特殊走法（王車易位、吃過路兵、兵升變）仍然有效

### 地雷規則
1. **移動後檢查**：每次棋子移動後，系統自動檢查目標格子是否有地雷
2. **地雷爆炸**：如果目標格子有地雷，棋子被移除
3. **資訊顯示**：移動後，目標格子的周圍地雷數量會顯示
4. **策略考量**：玩家需要根據已顯示的地雷數量推測其他格子的地雷位置

## 使用方法

### 啟動地雷模式
1. 從主選單點擊「💣 地雷模式」按鈕
2. 系統自動初始化地雷並開始新遊戲
3. 使用「開始」按鈕開始遊戲

### 遊戲進行
1. 正常下棋，遵循西洋棋規則
2. 注意觀察地雷區域的橙紅色邊框
3. 棋子移動後觀察顯示的地雷數量
4. 根據地雷數量推測並避免踩到地雷

### 新遊戲
- 點擊「新遊戲」按鈕重新開始
- 地雷會重新隨機放置
- 所有地雷數量顯示重置

## 技術實現

### 資料結構
- `m_mineField`：8×8 布林陣列，記錄地雷位置
- `m_mineCounts`：8×8 整數陣列，記錄每個格子周圍的地雷數量
- `m_mineRevealed`：8×8 布林陣列，記錄地雷數量是否已顯示

### 核心函數
- `initializeMinesweeper()`：初始化地雷，隨機放置 4-5 個地雷
- `checkMineExplosion()`：檢查並處理地雷觸發
- `getMineCount()`：獲取指定格子周圍的地雷數量
- `isMinesweeperSquare()`：檢查格子是否在地雷區域內
- `revealMineCount()`：標記格子的地雷數量為已顯示

### 視覺效果
- 地雷區域使用橙紅色邊框（`2px solid rgba(255, 100, 0, 0.6)`）
- 地雷數量使用大型粗體字體顯示（20pt, bold）
- 不同數量使用不同顏色，提高可讀性

## 策略技巧

1. **優先探索**：先移動到地雷區域邊緣，獲取更多資訊
2. **數量推理**：根據已知的地雷數量推測未探索區域的地雷位置
3. **風險評估**：在必須進入地雷區域時，選擇風險較低的路徑
4. **棋子價值**：考慮用較低價值的棋子探路
5. **戰術配合**：將地雷威脅納入整體戰術考量

## 未來改進

可能的增強功能：
- 可調整地雷數量
- 不同難度等級（地雷密度）
- 地雷爆炸特效動畫
- 標記可疑地雷位置
- 地雷統計資訊顯示
