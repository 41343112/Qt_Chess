# 地雷模式測試指南 (Minesweeper Mode Testing Guide)

本文檔提供地雷模式功能的手動測試指南，以確保所有功能正常運作。

## 測試前準備

1. 編譯專案：
   ```bash
   qmake Qt_Chess.pro
   make
   ```

2. 執行程式：
   ```bash
   ./Qt_Chess
   ```

## 測試項目

### 1. 地雷初始化測試

**目的**：驗證地雷是否正確初始化

**步驟**：
1. 從主選單點擊「💣 地雷模式」按鈕
2. 觀察棋盤顯示

**預期結果**：
- ✓ 棋盤正常顯示，所有棋子在正確位置
- ✓ 第 3-6 行、a-h 列的格子顯示橙紅色邊框
- ✓ 沒有顯示任何地雷數字（因為尚未移動棋子）

### 2. 地雷區域標示測試

**目的**：驗證地雷區域是否正確標示

**步驟**：
1. 在地雷模式中觀察棋盤
2. 檢查第 3-6 行（索引 3-6）的所有格子

**預期結果**：
- ✓ 所有地雷區域格子（第 3-6 行、a-h 列）都有橙紅色邊框
- ✓ 其他區域的格子使用普通青色邊框
- ✓ 邊框清晰可見，易於區分

### 3. 棋子移動與地雷數量顯示測試

**目的**：驗證移動後是否正確顯示地雷數量

**步驟**：
1. 點擊「開始」按鈕開始遊戲
2. 移動一個兵進入地雷區域（例如從 e2 移動到 e4）
3. 觀察目標格子（e4）

**預期結果**：
- ✓ 棋子成功移動到目標格子
- ✓ 如果格子周圍有地雷，顯示地雷數量（1-4）
- ✓ 數字使用顏色編碼：
  - 1：藍色
  - 2：綠色
  - 3：紅色
  - 4：紫色
- ✓ 數字字體大且粗體（20pt bold）
- ✓ 如果周圍沒有地雷，不顯示數字

### 4. 地雷觸發測試

**目的**：驗證踩到地雷時棋子是否被移除

**步驟**：
1. 開始遊戲並移動多個棋子
2. 根據顯示的地雷數量推測地雷位置
3. 嘗試移動棋子到可能有地雷的位置

**預期結果**：
- ✓ 如果踩到地雷，彈出警告訊息「💣 該棋子踩到地雷並被移除！」
- ✓ 該棋子立即從棋盤上消失
- ✓ 該格子變為空格
- ✓ 遊戲繼續進行

### 5. 地雷數量計算測試

**目的**：驗證九宮格算法是否正確計算地雷數量

**步驟**：
1. 開始遊戲並移動多個棋子到地雷區域
2. 記錄每個格子顯示的地雷數量
3. 觸發所有地雷，確認實際地雷位置
4. 回顧之前的地雷數量是否正確

**預期結果**：
- ✓ 每個格子顯示的數字等於周圍 8 個格子中的地雷總數
- ✓ 邊緣格子（少於 8 個相鄰格子）也正確計算
- ✓ 觸發地雷後，可以驗證之前的數字正確

### 6. 新遊戲測試

**目的**：驗證新遊戲時地雷是否重新隨機放置

**步驟**：
1. 在地雷模式中完成一局遊戲
2. 記錄地雷位置（透過觸發或推測）
3. 點擊「新遊戲」按鈕
4. 再次移動棋子探索地雷位置

**預期結果**：
- ✓ 地雷重新隨機放置
- ✓ 地雷位置與上一局不同（大概率）
- ✓ 地雷數量仍為 4-5 個
- ✓ 所有地雷數量顯示重置

### 7. 地雷隨機化測試

**目的**：驗證地雷放置的隨機性

**步驟**：
1. 開始新遊戲 5 次
2. 每次記錄地雷位置
3. 比較不同局的地雷分佈

**預期結果**：
- ✓ 每局地雷數量為 4 或 5 個
- ✓ 地雷位置在不同局之間有變化
- ✓ 地雷只出現在第 3-6 行、a-h 列
- ✓ 不會有兩個地雷在同一個格子

### 8. 遊戲規則整合測試

**目的**：驗證地雷模式與標準西洋棋規則的整合

**步驟**：
1. 在地雷模式中進行正常對局
2. 嘗試各種特殊走法：
   - 王車易位
   - 兵吃過路兵
   - 兵升變
3. 檢查將軍、將死判定

**預期結果**：
- ✓ 所有標準西洋棋規則正常運作
- ✓ 特殊走法可以正常執行
- ✓ 將軍和將死正確偵測
- ✓ 地雷觸發不影響基本遊戲規則

### 9. UI 一致性測試

**目的**：驗證 UI 元素在地雷模式中正常運作

**步驟**：
1. 在地雷模式中測試以下功能：
   - 時間控制
   - 棋譜記錄
   - 回放功能
   - 新遊戲按鈕
   - 返回主選單

**預期結果**：
- ✓ 所有 UI 功能正常運作
- ✓ 棋譜正確記錄移動
- ✓ 回放功能可以回顧對局
- ✓ 可以正常返回主選單

### 10. 邊界情況測試

**目的**：測試邊界情況和極端情況

**測試情況**：
1. 所有 5 個地雷都在同一行
2. 某個格子周圍有 4 個地雷（最大值）
3. 地雷區域邊緣的格子
4. 第一步就踩到地雷
5. 連續多個棋子踩到地雷

**預期結果**：
- ✓ 所有情況都能正確處理
- ✓ 不會發生崩潰或錯誤
- ✓ 地雷數量計算正確
- ✓ UI 正常更新

## 測試檢查清單

執行完整測試時，請使用以下檢查清單：

- [ ] 地雷初始化正確
- [ ] 地雷區域正確標示
- [ ] 地雷數量顯示正確
- [ ] 地雷觸發移除棋子
- [ ] 九宮格算法計算正確
- [ ] 新遊戲重新隨機放置地雷
- [ ] 地雷隨機分佈合理
- [ ] 西洋棋規則正常運作
- [ ] UI 功能完整
- [ ] 邊界情況正確處理

## 已知限制

目前版本的已知限制：
1. 地雷數量固定為 4-5 個，無法自訂
2. 地雷區域固定為第 3-6 行，無法調整
3. 沒有地雷標記功能（如掃雷遊戲中的旗幟）
4. 沒有地雷爆炸的動畫效果

## 回報問題

如果在測試中發現問題，請記錄：
1. 問題描述
2. 重現步驟
3. 預期行為
4. 實際行為
5. 螢幕截圖（如適用）

請在 GitHub Issues 中回報問題。
