# Functions 資料夾

## 概述
此資料夾包含 Qt_Chess 專案各主要功能模組的詳細技術文檔。每個 Markdown 檔案深入說明特定功能的實作細節、程式碼結構、使用方式和設計考量。

## 文檔列表

### 核心遊戲邏輯
- **[ChessPiece.md](ChessPiece.md)** - 棋子類別與移動規則
  - 棋子類型和顏色定義
  - 各棋子的移動驗證邏輯
  - 特殊走法（吃過路兵、兵升變）

- **[ChessBoard.md](ChessBoard.md)** - 棋盤管理與遊戲規則
  - 棋盤狀態管理
  - 移動驗證和執行
  - 將軍、將死、僵局判定
  - 王車易位驗證
  - 移動歷史記錄

- **[ChessEngine.md](ChessEngine.md)** - AI 引擎整合
  - Stockfish 引擎通訊
  - UCI 協議實作
  - 難度等級設定
  - FEN 格式轉換

### 網路功能
- **[NetworkManager.md](NetworkManager.md)** - 線上多人對戰
  - WebSocket 連線管理
  - 房間創建與加入
  - 棋步同步
  - 連線狀態處理

### 使用者介面
- **[SoundSettings.md](SoundSettings.md)** - 音效設定
  - 自訂音效檔案
  - 音量控制
  - 音效預覽
  - 設定持久化

- **[PieceIconSettings.md](PieceIconSettings.md)** - 棋子圖標設定
  - 預設圖標集
  - 自訂圖標上傳
  - 棋子大小調整
  - 圖標預覽

- **[BoardColorSettings.md](BoardColorSettings.md)** - 棋盤顏色設定
  - 預設配色方案
  - 自訂顏色選擇
  - 2×2 預覽網格
  - 配色插槽管理

### 遊戲功能
- **[TimeControl.md](TimeControl.md)** - 時間控制
  - 計時器管理
  - 加秒功能
  - 超時判定
  - 不同模式的計時邏輯

- **[ReplayFeature.md](ReplayFeature.md)** - 回放功能
  - 回放模式管理
  - 導航控制
  - 計時器暫停
  - 棋譜列表整合

- **[MoveListPGN.md](MoveListPGN.md)** - 棋譜記錄與 PGN 匯出
  - 代數記譜法生成
  - 棋譜列表顯示
  - PGN 格式匯出
  - PGN 檔案載入

### 系統功能
- **[UpdateChecker.md](UpdateChecker.md)** - 自動更新
  - GitHub API 整合
  - 版本比較
  - 更新通知
  - 下載連結

## 文檔結構

每個文檔通常包含以下章節：

### 1. 概述
功能的簡要說明和目的

### 2. 檔案位置
相關的標頭檔和實作檔路徑

### 3. 主要資料結構
列舉型別、結構體、類別定義

### 4. 核心功能
各個主要功能的詳細說明，包括：
- 函數簽名
- 參數說明
- 返回值
- 實作邏輯
- 程式碼範例

### 5. 使用範例
實際應用場景的完整程式碼示例

### 6. 設計考量
架構設計、效能優化、最佳實踐

### 7. 相關類別
與此功能互動的其他類別

### 8. 參考資源
外部文檔、標準規範、相關連結

## 使用指南

### 對於開發者
1. **新功能開發**: 參考相關文檔了解現有架構和設計模式
2. **問題除錯**: 查看功能的詳細實作邏輯和已知問題
3. **程式碼審查**: 使用文檔作為審查標準的參考
4. **重構**: 理解功能依賴關係，安全地進行重構

### 對於貢獻者
1. 閱讀相關功能文檔了解實作細節
2. 遵循現有的程式碼風格和設計模式
3. 更新或新增功能時，同步更新對應的文檔
4. 提交 Pull Request 時引用相關文檔章節

### 對於使用者
1. 了解各功能的使用方式和限制
2. 查看設定選項和自訂功能
3. 參考故障排除章節解決問題

## 功能模組關係圖

```
┌─────────────────────────────────────────┐
│            Qt_Chess (主視窗)            │
│  整合所有功能模組的主要應用程式類別     │
└────────────┬────────────────────────────┘
             │
    ┌────────┴────────┐
    │                 │
    ▼                 ▼
┌─────────┐      ┌──────────────┐
│ChessBoard│◄─────│ ChessPiece  │
│  棋盤    │      │   棋子       │
└────┬────┘      └──────────────┘
     │
     ├──────────┐
     │          │
     ▼          ▼
┌──────────┐ ┌────────────────┐
│ChessEngine│ │ NetworkManager │
│ AI引擎   │ │   網路管理     │
└──────────┘ └────────────────┘

      其他功能模組
┌───────────────────────────┐
│ SoundSettings             │ 音效設定
│ PieceIconSettings         │ 棋子圖標
│ BoardColorSettings        │ 棋盤顏色
│ TimeControl               │ 時間控制
│ ReplayFeature             │ 回放功能
│ MoveListPGN              │ 棋譜/PGN
│ UpdateChecker            │ 自動更新
└───────────────────────────┘
```

## 技術棧

### 核心技術
- **Qt 5**: GUI 框架
- **C++17**: 程式語言
- **Qt Widgets**: UI 元件
- **Qt Network**: 網路功能
- **Qt WebSockets**: WebSocket 支援
- **Qt Multimedia**: 音效播放

### 外部依賴
- **Stockfish**: 西洋棋引擎（可選）
- **GitHub API**: 版本檢查

### 開發工具
- **qmake**: 建置系統
- **Qt Creator**: IDE（建議）
- **Git**: 版本控制

## 程式碼規範

### 命名慣例
- **類別**: PascalCase (如 `ChessBoard`)
- **函數**: camelCase (如 `movePiece`)
- **成員變數**: m_ 前綴 + camelCase (如 `m_currentPlayer`)
- **常數**: UPPER_SNAKE_CASE (如 `MAX_DEPTH`)

### 註解風格
```cpp
/**
 * @brief 移動棋子
 * @param from 起始位置
 * @param to 目標位置
 * @return 移動是否成功
 */
bool movePiece(const QPoint& from, const QPoint& to);
```

### 檔案組織
```
類別名稱.h     - 標頭檔（類別聲明）
類別名稱.cpp   - 實作檔（類別實作）
```

## 建置說明

詳細的建置指南請參閱專案根目錄的 [BUILDING.md](../BUILDING.md)

## 測試

### 單元測試
- 棋子移動規則測試
- 將軍/將死判定測試
- FEN 轉換測試

### 整合測試
- 完整對局測試
- 網路通訊測試
- UI 互動測試

## 貢獻指南

### 新增功能
1. 在 `functions/` 目錄下建立對應的 MD 文檔
2. 遵循現有文檔的結構和風格
3. 包含完整的程式碼範例
4. 更新此 README 的文檔列表

### 更新現有文檔
1. 保持格式一致性
2. 更新相關章節的內容
3. 確保程式碼範例可執行
4. 更新修改日期

### 文檔撰寫建議
- 使用清晰的標題和子標題
- 提供充足的程式碼範例
- 解釋設計決策和權衡
- 包含視覺圖表（如有需要）
- 連結相關文檔和資源

## 授權

本專案採用與主專案相同的授權條款。

## 聯絡資訊

如有問題或建議，請透過以下方式聯絡：
- GitHub Issues: [Qt_Chess Issues](https://github.com/41343112/Qt_Chess/issues)
- Pull Requests: [Qt_Chess PRs](https://github.com/41343112/Qt_Chess/pulls)

## 更新日誌

### 2024-12-09
- 初始建立 functions 資料夾
- 新增所有主要功能模組的文檔
- 建立此 README 文件

---

**注意**: 這些文檔旨在幫助開發者理解程式碼結構和設計決策。建議在修改程式碼前先閱讀相關文檔，並在修改後更新對應的文檔內容。
