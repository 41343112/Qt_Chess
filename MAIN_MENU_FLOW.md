# 主選單功能流程圖

## UI 畫面流程

```
┌─────────────────────────────────────────────────┐
│                                                 │
│        ♔ 國際象棋 - 科技對弈 ♚                 │
│                                                 │
│  ┌───────────────────────────────────────┐     │
│  │        🎮 本地遊玩                    │     │
│  └───────────────────────────────────────┘     │
│                    ↓                            │
│  ┌───────────────────────────────────────┐     │
│  │        🤖 與電腦對戰                  │     │
│  └───────────────────────────────────────┘     │
│                    ↓                            │
│  ┌───────────────────────────────────────┐     │
│  │        🌐 線上遊玩                    │     │
│  └───────────────────────────────────────┘     │
│                    ↓                            │
│  ┌───────────────────────────────────────┐     │
│  │        ⚙️ 設定                        │     │
│  └───────────────────────────────────────┘     │
│                                                 │
└─────────────────────────────────────────────────┘
              主選單畫面
                  ↓
                  ↓ (點擊任一按鈕)
                  ↓
┌─────────────────────────────────────────────────┐
│  選單欄: [遊戲] [設定] [說明]                   │
│  ├─ 🏠 返回主選單                               │
│                                                 │
│  ┌──────┬──────────────┬──────────────┐        │
│  │棋譜  │  棋盤畫面    │  時間控制    │        │
│  │面板  │              │  面板        │        │
│  │      │  8x8 棋盤   │              │        │
│  └──────┴──────────────┴──────────────┘        │
│                                                 │
│  [新遊戲] [認輸] [請求和棋] [退出]             │
│                                                 │
└─────────────────────────────────────────────────┘
              遊戲畫面
```

## 點擊流程

### 1. 本地遊玩流程
```
主選單
  │
  ├─ 點擊「本地遊玩」
  │
  └─→ 遊戲畫面
       │
       ├─ 設置為「雙人對戰」模式
       ├─ 自動開始新遊戲
       └─ 顯示棋盤和控制面板
```

### 2. 與電腦對戰流程
```
主選單
  │
  ├─ 點擊「與電腦對戰」
  │
  └─→ 遊戲畫面
       │
       ├─ 設置為「電腦對戰」模式
       ├─ 顯示顏色選擇按鈕
       │   ├─ 執白
       │   ├─ 隨機
       │   └─ 執黑
       └─ 等待使用者選擇並開始遊戲
```

### 3. 線上遊玩流程
```
主選單
  │
  ├─ 點擊「線上遊玩」
  │
  └─→ 遊戲畫面
       │
       └─→ 線上對戰對話框
            │
            ├─ 創建房間
            │   └─ 顯示房號
            │       └─ 等待對手加入
            │
            └─ 加入房間
                └─ 輸入房號
                    └─ 連接到對手
```

### 4. 設定流程
```
主選單
  │
  ├─ 點擊「設定」
  │
  └─→ 遊戲畫面
       │
       └─→ 音效設定對話框
            │
            ├─ 音效設定
            ├─ 棋子圖標設定
            ├─ 棋盤顏色設定
            └─ 其他設定
```

### 5. 返回主選單流程
```
遊戲畫面
  │
  ├─ 點擊選單欄「遊戲」→「返回主選單」
  │
  ├─→ 如果遊戲進行中
  │    │
  │    └─→ 顯示確認對話框
  │         │
  │         ├─ 「是」→ 返回主選單
  │         └─ 「否」→ 繼續遊戲
  │
  └─→ 如果遊戲未進行或已結束
       │
       └─→ 直接返回主選單
```

## 狀態轉換圖

```
   ┌──────────────┐
   │              │
   │  應用程式啟動 │
   │              │
   └───────┬──────┘
           │
           ↓
   ┌──────────────┐
   │              │
   │   主選單     │◄─────────┐
   │   (初始狀態) │          │
   │              │          │
   └───┬──────────┘          │
       │                     │
       │ (點擊任一按鈕)       │
       ↓                     │
   ┌──────────────┐          │
   │              │          │
   │   遊戲畫面   │          │
   │              │          │
   └───┬──────────┘          │
       │                     │
       │ (點擊返回主選單)     │
       └─────────────────────┘
```

## UI 元件層級結構

```
Qt_Chess (QMainWindow)
│
├─ MenuBar (選單欄)
│   ├─ 遊戲選單
│   │   └─ 返回主選單
│   ├─ 設定選單
│   └─ 說明選單
│
└─ CentralWidget
    └─ RootLayout (QVBoxLayout)
        │
        ├─ MainMenuWidget (主選單容器)
        │   └─ MenuLayout (QVBoxLayout)
        │       ├─ TitleLabel (標題)
        │       ├─ LocalPlayButton (本地遊玩)
        │       ├─ ComputerPlayButton (電腦對戰)
        │       ├─ OnlinePlayButton (線上遊玩)
        │       └─ SettingsButton (設定)
        │
        └─ GameContentWidget (遊戲內容容器)
            └─ MainLayout (QVBoxLayout)
                └─ ContentLayout (QHBoxLayout)
                    ├─ MoveListPanel (棋譜面板)
                    ├─ BoardContainer (棋盤容器)
                    ├─ RightTimePanel (時間面板)
                    └─ TimeControlPanel (時間控制面板)
```

## 可見性控制

| 狀態 | MainMenuWidget | GameContentWidget | MenuBar |
|------|----------------|-------------------|---------|
| 啟動時 | 顯示 | 隱藏 | 隱藏 |
| 選擇模式後 | 隱藏 | 顯示 | 顯示 |
| 返回主選單 | 顯示 | 隱藏 | 隱藏 |
